# Schedule コマンド詳細説明

## 概要
`/schedule` コマンドは、日付範囲と時間帯を指定して日程調整投票を作成するコマンドです。

## 使用方法
```
/schedule title:<投票タイトル> from:<開始日> to:<終了日> times:<時間> [description:<説明>] [expire_hours:<期限時間>]
```

## パラメータ

### 必須パラメータ
- **title**: 投票のタイトル（文字列）
- **from**: 開始日（YYYY/MM/DD形式）
- **to**: 終了日（YYYY/MM/DD形式）
- **times**: 時間（スラッシュ区切り、例：1800/1930/2045）

### オプションパラメータ
- **description**: 投票の説明（任意）
- **expire_hours**: 投票期限（1-168時間、デフォルト24時間）

## 使用例

### 基本的な使用例
```
/schedule title:会議の日程調整 from:2024/01/15 to:2024/01/17 times:1800/1930/2045
```

### 詳細な使用例
```
/schedule title:プロジェクト会議 from:2024/01/20 to:2024/01/22 times:0900/1300/1800 description:来週のプロジェクト進捗確認会議です expire_hours:48
```

## 機能詳細

### 1. 日付検証
- 日付形式は YYYY/MM/DD で入力
- 開始日が終了日より後でないことを確認
- 無効な日付形式の場合はエラーメッセージを表示

### 2. 時間検証
- 時間は HHMM 形式（例：1800 = 18:00）
- スラッシュ（/）で区切って複数指定可能
- 24時間制で0-23時、分は0-59分の範囲内
- 無効な時間形式の場合はエラーメッセージを表示

### 3. 候補生成
- 指定した日付範囲内の各日付と時間の組み合わせを生成
- 日本語の曜日表示（日、月、火、水、木、金、土）
- 日付順、時間順でソート
- 最大50個の候補まで対応

### 4. 投票インターフェース
- SelectMenuで複数選択可能（最大25個）
- ページネーション対応（1ページ20個まで）
- 投票確定・キャンセルボタン
- ページ移動ボタン（複数ページの場合）

### 5. データベース保存
- 投票情報をSQLiteデータベースに保存
- メッセージID、チャンネルID、ギルドID、作成者IDを記録
- 投票期限の設定

## エラーハンドリング

### 日付エラー
- 無効な日付形式
- 開始日が終了日より後
- 日付範囲が広すぎる（候補が50個を超える）

### 時間エラー
- 無効な時間形式
- 時間範囲外（0-23時、0-59分以外）
- 有効な時間が1つもない

### システムエラー
- データベース接続エラー
- Discord API エラー
- メッセージ送信エラー

## 出力例

### 成功時
```
✅ 日程調整投票「会議の日程調整」を作成しました！
📅 9個の候補から選択してください。
```

### エラー時
```
❌ 日付の形式が正しくありません。YYYY/MM/DD形式で入力してください。
```

## 注意事項
- 候補が多すぎる場合は日付範囲を狭めるか時間帯を減らしてください
- 投票期限は最大168時間（7日間）まで設定可能
- SelectMenuのオプションは100文字制限
- ActionRowは最大5個まで